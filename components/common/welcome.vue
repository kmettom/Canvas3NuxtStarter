<template>

  <div class="ovp-welcome">
    <div class="ovp-welcome-logo">

    <svg ref="logo" class="logo-svg" width="300" height="14" viewBox="0 0 300 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g clip-path="url(#clip0_445_115)">
        <path ref="letter1" d="M10.4991 0C16.1675 0 20.7221 2.57487 20.7221 6.84288C20.7221 11.1109 16.4245 13.9953 10.2183 13.9953C4.55468 14 0 11.4251 0 7.10084C0 2.77655 4.27864 0 10.4991 0ZM2.46534 6.95544C2.46534 10.8623 5.80163 13.1792 10.4134 13.1792C14.7492 13.1792 18.2663 11.064 18.2663 7.04456C18.2663 3.02513 14.911 0.820771 10.2992 0.820771C5.96345 0.820771 2.46534 2.92194 2.46534 6.95544Z"  />
        <path ref="letter2" d="M49.4543 0.421875C49.6209 0.459396 49.9159 0.459396 50.211 0.459396C50.5061 0.459396 50.8202 0.459396 50.9868 0.421875C47.7266 4.91032 44.5807 9.51132 41.4681 13.9998H41.2444C38.6125 9.67548 35.3714 4.70864 32.2969 0.421875C32.8537 0.459396 33.2583 0.478156 33.6676 0.478156C34.0769 0.478156 34.5004 0.459396 35.0573 0.421875C37.1704 4.23494 39.612 8.16057 41.9821 11.7016C44.3713 8.24968 47.0746 4.14583 49.4448 0.421875H49.4543Z"  />
        <path ref="letter3" d="M79.79 13.5075C79.3998 13.5075 78.9762 13.5638 78.5859 13.5825C78.6621 12.3584 78.7906 10.4964 78.7906 6.92257C78.7906 2.50448 78.6811 1.62743 78.5859 0.426758C79.2903 0.445518 80.1042 0.5018 80.8085 0.5018C81.4368 0.5018 85.9772 0.426758 86.9576 0.426758C91.5123 0.426758 93.8301 1.37416 93.8301 4.37115C93.8301 7.36813 91.5171 8.31554 86.9576 8.31554H80.7895C80.8085 10.9983 80.918 12.5695 80.9942 13.5919C80.5849 13.5732 80.1803 13.5169 79.79 13.5169V13.5075ZM80.8847 1.38823C80.8276 2.37316 80.7895 3.59728 80.7895 7.32123H86.9576C89.8465 7.32123 91.5504 6.57081 91.5504 4.36646C91.5504 2.1621 89.8465 1.39292 86.9576 1.39292H80.8847V1.38823Z"  />
        <path ref="letter4" d="M116.613 1.00326C119.188 5.36507 121.52 9.08902 124.556 13.5775C123.98 13.5399 123.595 13.5212 123.224 13.5212C122.852 13.5212 122.467 13.5399 121.891 13.5775C121.149 12.2455 120.411 10.9135 119.649 9.58148H109.721C108.85 10.951 107.999 12.3205 107.237 13.5775C107.051 13.5399 106.737 13.5212 106.404 13.5212C106.071 13.5212 105.738 13.5399 105.571 13.5775C108.332 9.74564 111.663 4.96172 114.295 0.984496C114.019 0.73123 113.629 0.637428 113.034 0.599907V0.416992C113.424 0.416992 114.071 0.473274 114.462 0.473274C114.885 0.473274 115.371 0.416992 115.609 0.416992C116.127 0.416992 116.37 0.473274 116.608 1.00326H116.613ZM114.852 1.78651C113.424 3.90175 111.868 6.25619 110.35 8.59656H119.074C117.741 6.34999 116.351 4.08935 114.852 1.78651Z"  />
        <path ref="letter5" d="M139.063 13.5075C138.673 13.5075 138.25 13.5638 137.859 13.5825C137.936 12.3584 138.064 10.4964 138.064 6.92257C138.064 2.50448 137.955 1.62743 137.859 0.426758C138.545 0.445518 139.378 0.5018 140.082 0.5018C140.71 0.5018 144.656 0.426758 146.084 0.426758C150.676 0.426758 152.956 1.32257 152.956 4.2961C152.956 6.63178 151.547 7.69175 148.734 8.03882C149.363 8.475 149.772 9.0425 150.143 9.6616C151.143 11.3407 151.847 13.3105 153.717 13.3293C154.46 13.3293 155.126 13.1464 155.793 12.7289L155.902 12.9118C155.145 13.4231 154.179 13.7701 152.904 13.7701C147.345 13.7701 149.106 8.16545 145.141 8.16545H140.068C140.087 10.942 140.196 12.4569 140.272 13.5872C139.863 13.5685 139.459 13.5122 139.068 13.5122L139.063 13.5075ZM140.158 1.38823C140.101 2.33564 140.068 3.541 140.068 7.1946H146.088C149.772 7.1946 150.829 6.08304 150.829 4.29141C150.829 2.49979 149.772 1.38823 146.088 1.38823H140.163H140.158Z"  />
        <path ref="letter6" d="M174.863 13.5077C174.473 13.5077 174.049 13.564 173.659 13.5828C173.735 12.3586 173.883 10.4967 173.883 6.92279C173.883 3.62095 173.807 2.30302 173.735 1.33686H168.624C167.957 1.33686 167.401 1.48225 167.029 1.99348L166.844 1.95595L167.139 0.384766H167.343C167.772 0.384766 168.195 0.422287 168.79 0.422287H180.941C181.55 0.422287 182.235 0.422287 182.388 0.384766H182.611L182.907 1.95595L182.721 1.99348C182.331 1.48225 181.793 1.33686 181.127 1.33686H175.996C175.92 2.30302 175.867 3.61626 175.867 6.92279C175.867 10.5013 175.996 12.3633 176.072 13.5828C175.682 13.564 175.258 13.5077 174.868 13.5077H174.863Z"  />
        <path ref="letter7" d="M196.518 0.0377136C197.498 0.820963 201.686 4.1275 205.332 6.69768C207.516 8.19383 209.592 9.76502 211 10.7499C211.019 8.98177 211.057 7.37306 211.057 5.73152C211.057 4.08997 211.019 2.39215 210.929 0.422303C211.115 0.459824 211.372 0.478585 211.633 0.478585C211.895 0.478585 212.152 0.459824 212.338 0.422303C212.19 2.66887 212.133 4.96703 212.133 7.41058C212.133 9.47423 212.171 11.6645 212.262 14.0002H212.038C211.057 13.2498 207.407 10.3841 204.499 8.30639C201.758 6.42565 199.202 4.49332 197.574 3.32549C197.536 4.47456 197.517 5.62364 197.517 6.77272C197.517 9.01929 197.593 11.2612 197.722 13.5828C197.517 13.5453 197.279 13.5265 197.017 13.5265C196.756 13.5265 196.499 13.5453 196.313 13.5828C196.389 12.0679 196.422 10.2997 196.422 8.41895C196.422 5.66116 196.346 2.70639 196.256 0.00488281H196.513V0.0424038L196.518 0.0377136Z"  />
        <path ref="letter8" d="M241.246 0.599907L241.503 1.87562L241.336 1.91314C241.041 1.47696 239.689 1.38316 238.742 1.38316H229.666C229.647 2.98718 229.557 4.65217 229.557 6.25619H235.449C236.262 6.25619 238.447 6.21867 239.132 6.05451C239.075 6.30778 239.075 6.50945 239.075 6.74865C239.075 6.96909 239.075 7.152 239.132 7.42403C238.447 7.24111 236.262 7.22235 235.449 7.22235H229.557C229.557 9.00929 229.652 10.8197 229.666 12.5878H238.166C239.999 12.5878 241.055 12.5128 241.798 11.7483L241.964 11.8234L241.26 13.282C241.131 13.554 241.055 13.5728 240.741 13.5728C237.409 13.5728 234.963 13.4977 233.093 13.4977C231.332 13.4977 229.057 13.554 227.296 13.5728C227.372 12.3486 227.501 10.4867 227.501 6.9128C227.501 2.49471 227.391 1.61766 227.296 0.416992C229.109 0.435753 231.427 0.492034 233.24 0.492034C234.906 0.492034 237.371 0.416992 240.984 0.416992C241.131 0.416992 241.207 0.473274 241.241 0.599907H241.246Z"  />
        <path ref="letter9" d="M256.971 13.5075C256.58 13.5075 256.157 13.5638 255.767 13.5825C255.843 12.3584 255.971 10.4964 255.971 6.92257C255.971 2.50448 255.862 1.62743 255.767 0.426758C256.452 0.445518 257.285 0.5018 257.989 0.5018C258.617 0.5018 262.563 0.426758 263.991 0.426758C268.583 0.426758 270.863 1.32257 270.863 4.2961C270.863 6.63178 269.454 7.69175 266.642 8.03882C267.27 8.475 267.679 9.0425 268.05 9.6616C269.05 11.3407 269.754 13.3105 271.625 13.3293C272.367 13.3293 273.033 13.1464 273.7 12.7289L273.809 12.9118C273.052 13.4231 272.086 13.7701 270.811 13.7701C265.252 13.7701 267.013 8.16545 263.048 8.16545H257.975C257.994 10.942 258.103 12.4569 258.18 13.5872C257.77 13.5685 257.366 13.5122 256.975 13.5122L256.971 13.5075ZM258.065 1.38823C258.008 2.33564 257.975 3.541 257.975 7.1946H263.995C267.679 7.1946 268.736 6.08304 268.736 4.29141C268.736 2.49979 267.679 1.38823 263.995 1.38823H258.07H258.065Z"  />
        <path ref="letter10" d="M299.367 2.62627L299.181 2.66379C298.106 1.49595 295.921 0.858099 293.09 0.858099C288.997 0.858099 287.921 2.26513 287.921 3.32041C287.921 7.11472 299.995 4.03331 299.995 9.78339C299.995 13.4135 295.236 13.981 292.438 13.981C289.639 13.981 287.602 13.5073 285.917 12.7944L285.398 11.0075L285.584 10.9512C286.564 12.3583 289.787 13.1228 292.495 13.1228C295.203 13.1228 298.311 12.4661 298.311 10.2008C298.311 6.00316 286.236 9.15961 286.236 3.73783C286.236 0.379707 290.757 -0.00488281 292.866 -0.00488281C295.588 -0.00488281 297.773 0.5251 299.053 1.16296L299.367 2.62158V2.62627Z"  />
      </g>
      <defs>
        <clipPath id="clip0_445_115">
          <rect width="300" height="14"  />
        </clipPath>
      </defs>
    </svg>
    </div>

    <div ref="bg" class="ovp-welcome-bg"></div>

  </div>

</template>
<script>
import gsap from 'gsap'
import {Canvas} from "~/utils/canvas";

export default {
  props: ['welcomeInit'],
  data() {
    return {
      show: false,
      logoAniDuration: 1.35, //1.65
      curtainUpDuration: 2250, //2250
    }
  },
  methods: {
    logoAnimateIn(){
      let tl = gsap.timeline({
        delay: 0.35,
        onComplete: () => { this.logoAnimateOut() },
      });

      const letterY = 30;
      for (let i = 1; i <= 10; i++) {
        tl.fromTo(this.$refs[`letter${i}`], { y:letterY } , {duration: this.logoAniDuration/10, y:0 , ease: 'linear'}, `>-${this.logoAniDuration/15}` );
      }

    },
    logoAnimateOut() {
     Canvas.curtainAnimation(this.curtainUpDuration)

      setTimeout(() => {
        gsap.to('.ovp-welcome' , {duration: 0 ,  display: 'none', ease: 'linear'})
      }, this.curtainUpDuration * 0.3 )

      setTimeout(() => {
        this.welcomeComplete()
      }, this.curtainUpDuration * 0.5 )

    },

    welcomeComplete() {
      this.$emit('welcomeComplete')
    }
  },
  mounted() {
    // this.logoAnimateIn()
  },
  watch: {
    welcomeInit(newValue, oldValue) {
      if(newValue){
        this.logoAnimateIn()
      }
    }
  }

}


</script>
<style lang="scss" scoped>
.ovp-welcome {
  position: fixed;
  height: 100vh;
  width: 100vw;
  top: 0;
  left: 0;
  background-color: var(--white);
  z-index: 10;
  overflow: hidden;
}
.ovp-welcome-bg{
  background: var(--blue-primary);
  height: 0px;
  width: 100%;
  position: absolute;
  left: 0px;
  bottom: 0px;
}
.ovp-welcome-logo{
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(1);
  margin: auto;
  width: 300px;
  height: 14px;
}
.logo-svg{
  position: absolute;
  top: 0px;
  left: 0px;
  path{
    fill: var(--blue-secondary);
    transform: translate(0px, 20px);
  }
}

</style>
